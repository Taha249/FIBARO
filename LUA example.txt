local startSource = fibaro:getSourceTrigger();
if(startSource["type"] == "other") then
	fibaro:call(219, "close");
	setTimeout(function()
		fibaro:call(189, "turnOn");
	end, 5000)
else
if (( tonumber(fibaro:getValue(198, "value")) > 0 ) and ( tonumber(fibaro:getValue(204, "value")) > 0 ) and ( tonumber(fibaro:getValue(213, "value")) > 0 )) then
setTimeout(function()
local delayedCheck0 = false;
local tempDeviceState0, deviceLastModification0 = fibaro:get(198, "value");
if (( tonumber(fibaro:getValue(198, "value")) > 0 ) and (os.time() - deviceLastModification0) >= 3) then
	delayedCheck0 = true;
end
local delayedCheck1 = false;
local tempDeviceState1, deviceLastModification1 = fibaro:get(204, "value");
if (( tonumber(fibaro:getValue(204, "value")) > 0 ) and (os.time() - deviceLastModification1) >= 3) then
	delayedCheck1 = true;
end
local delayedCheck2 = false;
local tempDeviceState2, deviceLastModification2 = fibaro:get(213, "value");
if (( tonumber(fibaro:getValue(213, "value")) > 0 ) and (os.time() - deviceLastModification2) >= 3) then
	delayedCheck2 = true;
end

local startSource = fibaro:getSourceTrigger();
if (
 ( delayedCheck0 == true  and  delayedCheck1 == true  and  delayedCheck2 == true )
or
startSource["type"] == "other"
)
then
	fibaro:call(219, "close");
	setTimeout(function()
		fibaro:call(189, "turnOn");
	end, 5000)
end
end, 3000)
end
end